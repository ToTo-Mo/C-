08 객체지향
===

# 1. 객체지향

객체지향 프로그래밍(Object-Oriented Programming, OOP)은 실제 세계가 객체(Object)들로 구성되어 있는 것과 비슷하게 소프트웨어도 객체 단위로 작성하는 방법입니다. 우리가 살고 있는 세계에는 사람, 동물, 건물, 자동차, 시계, 토스터, 세탁기 등의 많은 객체가 존재합니다. 객체들은 객체 나름대로의 고유한 기능을 수행하면서 다른 객체들과 상호작용을 합니다.

예를 들어, 사람이 자동차를 운전하는 상황을 생각해보면, 사람과 자동차는 모두 특정한 기능을 수행하는 객체라고 생각할 수 있습니다. 또한 사람과 자동차는 속도계, 브레이크 페탈, 가속 페달등을 통하여 서로 상호작용을 하고 있습니다.

<img src="img/08%20객체간%20상호작용.png" width = "40%">

소프트웨어 개발도 이와 같이 하는 방식을 객체지향 방법이라고 합니다. 다양한 기능을 하는 소프트웨어 객체들이 존재하고 이러한 객체들을 조합하여 자기가 원하는 기능을 구현하는 기법입니다. 위의 그림처럼 인간과 자동차는 소프트웨어 객체로 표현되며, 이들 소프트웨어 객체들이 메시지를 전달하여 서로 상호작용하면서 원하는 작업을 수행하게 됩니다.

# 2. 객체

객체(Object)는 그 이름에서 볼 수 있듯이, 객체 지향 기술의 핵심 개념입니다. 객체는 현실 세계에서 존재하는 객체들을 흉내 내어서 소프트웨어 상에서 구현한 것 입니다. 객체는 상태와 동작을 가지고 있습니다. 각체의 상태(state)는 객체의 특징값(속성)입니다. 

예를 들어 자동차 객체의 경우 속성은 차종, 색상, 기어, 최대 속도, 연식, 배기량, 주행 거리, 연비 등입니다. 객체의 동작 또는 행동은 객체가 취할 수 있는 동작입니다. 예를 들어, 전진하기, 멈추기, 후진하기, 방향 전환, 기어 변속등이 해당됩니다.


<img src="img/08%20자동차%20객체.png" width="60%">

여기서 객체의 상태와 동작은 소프트웨어에서 각각 변수와 함수로 표현될 수 있습니다. 변수는 객체의 상태를 저장하며, 객체에서는 필드(field) 또는 멤버 변수라고 부릅니다.

함수(function)는 특정한 동작을 수행합니다. 객체에서는 메소드(method) 또는 멤버 함수라고 부릅니다. 

그러면 앞서 자동차 객체가 표현할 수 있는 상태와 동작은 C++ 객체에서는 다음과 같이 표현될 수 있습니다.

<img src="img/08%20자동차%20객체를%20클래스로.png" width="60%">

# 3. 메시지

어떤 문제를 해결하는 프로그램을 작성할 때 홀로 작동하는 객체는 거의 유용하지 않습니다. 일반적으로 유용한 프로그램은 많은 수의 객체로 이루어져 있습니다. 대부분의 객체는 무언가를 실행하기 위해서 다른 객체를 필요로 합니다.

예를 들어, 자동차의 경우 혼자서는 쓸모가 없습니다. 하지만 사람이 있다면 유용하게 사용 될 수 있습니다. 대부분의 프로그램 또한 마찬가지로 단일 객체로 이루어지지 않고 여러 객체들이 상호 작용을 이루면서 동작합니다. 이때 객체들간 상호작용을 위한 통신 방식이 필요합니다.

소프트웨어 객체는 메시지(message)를 통해 다른 소프트웨어 객체와 통신하고 서로 상호작용합니다. 운전사 객체가 자동차 객체를 가속하기를 원한다면, 운전사 객체는 가속 메시지를 작성하여 자동차 객체에 전달합니다. 때때로 메시지에는 추가적인 정보들이 필요한 경우가 있는데, 예를 들어 가속하는 경우, 목표 속도가 필요한 경우가 있습니다. 이런 정보들은 메시지의 매개 변수(parameter)의 형태로 전달됩니다. 메시지는 다음의 세가지 구성 요소로 이루어집니다.

- 메시지를 받는 객체 : car
- 메시지의 이름 : moveForward()
- 메시지의 매개변수 : 100km


여기서 메시지 전달은 처음 배우는 개념이 아닌 멤버 함수를 호출하는 방법입니다. 객체는 다른 객체에 메시지를 보낼 때, 실제로 그 객체의 멤버 함수를 호출합니다. 메시지의 매개 변수는 함수의 매개 변수입니다. 객체가 할 수 있는 모든 것은 멤버 함수로 표현되기 때문에, 메시지 전달은 즉 멤버 함수 호출을 의미합니다.

# 4. 클래스

앞서 객체지향 프로그램은 객체로 구성된다는 사실을 알았습니다. 그런데 같은 종류의 객체가 하나만 있지는 않습니다. 현실에서도 자동차는 하나만 있지 않고 여러 브랜드의 자동차가 있습니다. 자동차는 엔지니어들의 설계로 만들어집니다. 설계를 통해 나온 설계도를 이용하여 자동차를 만듭니다.

객체지향에서도 같은 객체들이 여러개 필요한 경우가 있습니다. 이러한 객체들은 모두 하나의 설계도로 만들어집니다. 바로 이 설계도가 클래스(class)라고 합니다.

객체지향 소프트웨어의 기본 단위는 클래스가 됩니다. 소프트웨어를 만드는 것은 바로 이 클래스를 만든다는 것 입니다. 

객체가 생성될 때마다 각 객체에 필요한 기억 공간이 할당됩니다. 그 이유는 각 객체마다 가지고 있는 상태 값들이 다 다르기 떄문입니다. 따라서 같은 클래스로 만든 객체라 하여도 각기 다른 상태 값들을 가질 수 있습니다.

멤버 함수의 경우는 다릅니다. 멤버 함수는 같은 클래스에 속하는 객체라면 모두 동일합니다. 따라서 객체의 멤버 함수들은 객체마다 저장되는 것이 아니라 하나의 멤버 함수를 공유합니다. 

## 객체지향과 절차지향의 비교

자동차 운전을 하는 코드를 작성해보겠습니다. 여기서는 각각 절차지향과 객체지향에서 어떤 차이를 보이는지 확인합니다.

> 절차적 프로그래밍

```c++
struct Car{
    int speed;
    int gear;
    char *pcolor;
};

void init(Car &c, char *color);
void start(Car &c);
void stop(Car &c);
int get_speed(Car &c);
void set_speed(Car &c, int speed);

void main(){
    Car car;

    init(car, "red");
    start(car);
    set_speed(car, 60);
    stop(car);
}
```

> 객체지향 프로그래밍

```c++
class Car{

    private:

    int speed;
    int gear;
    char *pcolor;

    public:
        void init(char *color);
        void start();
        void stop();
        int get_speed();
        void set_speed(int speed);
};

void main(){
    Car car;

    car.init("red");
    car.start();
    car.set_speed(60);
    car.stop();
}
```

객체지향 방법에서는 절차적 방법에 비해 굉장히 다르게 접근하고 있습니다. 먼저 데이터에 우선적으로 초점을 맞추고 있다는 점입니다. 데이터를 표현하는 방법, 사용하는 방법을 절차보다도 먼저 생각합니다. 따라서 자동차가 가지고 있는 모든 정보를 하나의 객체가 가지고 있어야 합니다. 이들 정보를 외부로부터 받아들이는 멤버 함수가 필요합니다. 

또한 주행 거리나 주행 시간을 계산하는 멤버 함수도 필요합니다. 결과를 출력하는 멤버함수도 추가될 것입니다. 전체 작업은 이들 자동차 객체를 원하는 만큼 만들고 이들 객체의 적절한 멤버함수를 호출하면서 실행됩니다.

# 5. 객체 지향 프로그래밍의 개념들

## 캡슐화

캡슐화란 데이터와 함수들을 객체 안에 넣어서 묶는 다는 의미입니다. 이것은 상당한 장점을 가지고 있습니다.

- 다른 프로그래머가 사용하기 편합니다

## 정보은닉

객체지향 기법에서는 객체는 절대 다른 객체의 내부적인 데이터를 직접 조작하지 않습니다. 반대로 다른 객체에게는 내부 데이터를 노출하지 않아야 합니다. 객체 간의 모든 통신은 함수 호출을 통해서만 이루어져야 합니다.

이런식으로 데이터를 은폐하는 것을 정보 은닉이라고 합니다. 왜 정보 은닉이 필요한가? 내부 데이터가 숨겨져 있다는 것은 이 데이터들의 프로그램의 다른 부분에 영향을 미치지 않고, 쉽게 변경될 수 있다는 것을 의미합니다.

컴퓨터를 예로 들어 보면, 우리가 컴퓨터를 업그레이드 하고 싶을 때 컴퓨터 본체를 새로사는것이 아니라, 새로운 부품만 교체해서 사용할 수 있습니다. 즉, 정보은닉이 되면 프로그램을 업그레이드 할 때 기존 클래스를 버리고 새로 만드는 것이 아닌 기존 클래스를 유지한채 새로운 클래스를 만드는 것 입니다.

## 상속과 다형성

상속은 기존의 코드를 재활용하기 위한 기ㅓㅂ으로 이미 작성된 클래스(부모 클래스)를 이어 받아서 새로운 클래스(자식 클래스)를 생성하는 기법입니다. 자식 클래스는 부모 클래스의 모든 속성과 동작을 물려받을 수 있습니다. 만약 자식 클래스에 필요한 기능이 있다면 추가 또는 변경할 수 있습니다.

예를 들어 