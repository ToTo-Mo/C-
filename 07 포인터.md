07 포인터
===

# 1. 포인터

포인터는 메모리의 주소를 가지고 있는 변수입니다. 

## 메모리

지금까지 사용한 변수들은 메모리에 만들어집니다. 메모리는 각 바이트마다 고유한 주소를 가지고 있습니다. 이들 주소를 이용하여 메모리 각각의 바이트에 접근할 수 있습니다. 

변수가 메모리에 저장될 때 변수의 크기에 따라서 차지하는 공간이 다릅니다. 일반적으로 char형은 1바이트, int형은 4바이트, float형은 4바이트를 차지합니다.

```c++
void main(){
    int i = 10;
    char c = 69;
    float f = 12.3
}
```

다음과 같이 세 변수들을 생성하면 메모리상에는 이렇게 배치가 됩니다. 이는 예시일 뿐 실제로는 그렇게 되지 않습니다.

<img src="img/07%20메모리.png">

## 변수의 주소

C++에서 변수의 주소는 &(주소연산자)를 통해서 알 수 있습니다.

```c++
// 주소 연산자
#include <iostream>
using namespace std;

int main()
{
	int i = 10;
	char c = 69;
	double f = 12.3;

	cout << "i의 주소: " << &i << endl;	// 변수 i의 주소출력
	cout << "c의 주소: " << (void *)&c << endl;	// 변수 c의 주소출력
	cout << "f의 주소: " << &f << endl;	// 변수 f의 주소출력

	return 0;
}
```

실제로 앞서 예시와는 결과가 다를 수 있습니다. 메모리 공간에 변수를 배치하는 것은 컴파일러의 권한이기 때문입니다.

## 포인터 선언

포인터도 변수이기에 선언할 수 있습니다. 포인터의 이름은 일반적인 변수 이름 규칙과 동일하게 적용됩니다. 포인터를 선언하려면 포인터가 가르키게 될 자료형을 쓰고 *를 붙인 다음 포인터의 이름을 적습니다.

```c++
int *pa;    //정수를 가르키는 포인터
```

위에서는 포인터를 선언만하고 아직 초기화하지 않았으므로 포인터가 현재 가지고 있는 값은 아무런 의미도 없는 값이 들어있습니다. 다른 자료형을 가르키는 포인터 또한 아래과 같이 만들 수 있습니다.

```c++
char *pc;
float *pf;
double *pd;
```

## 포인터 초기화

포인터에 변수의 주소를 저장하려면 & 연산자를 이용해야 합니다. & 연산자는 앞서 배웟든 변수의 주소를 나타내는 연산자입니다.

```c++
int i = 10;

int *p1 = &i;

int *p2;
p2 = &i;

int *p3 = NULL; //포인터 p3가 아무것도 가리키지 않음을 의미한다.
```

포인터는 선언시 지정한 자료형의 변수만 가리킬 수 있습니다. int형 포인터는 int형 변수만 가리킬 수 있다는 것 입니다.

## 간접 참조 연산자 *

포인터가 단순히 메모리의 주소만 저장할 수 있는 것이라면 별로 유용하지 않을 것입니다. 포인터가 유용한 이유는 포인터를 통하여 포인터가 가리키는 위치의 값을 읽어오거나 변경할 수 있기 때문입니다. 포인터 p가 가리키는 위치에 저장된 내용을 가져오려면 p 앞에 * 기호를 붙여서 *p라고 하면 됩니다. 이것을 포인터를 통하여 간접 참조 한다고 합니다.

* 연산자는 곱셈 연산자가 아닌 포인터가 가리키는 주소의 값을 가져오는 연산자입니다.

```c++
int i = 10;
int *pi = &i;

*p = 30;     
// p = 30; 이것은 p의 주소를 바꾼다는 의미이므로 유의해야 한다.

cout<<*p<<endl;
```

## 예제

```c++
#include <iostream>
using namespace std;

int main()
{
	int i = 3000;
	int *p = &i;			// 변수와 포인터 연결
	
	cout << &i << endl;	// 변수의 주소 출력
	cout << p << endl;	// 포인터의 값 출력

	cout << i << endl;	// 변수의 값 출력
	cout << *p << endl;	// 포인터를 통한 간접 참조 값 출력

	return 0;
}	
```

## 예제

```c++
#include <iostream>
using namespace std;

int main()
{
	char c = 'A';		// 문자형 변수 정의
	int i = 10000;	// 정수형 변수 정의
	double d = 6.78;	// 실수형 변수 정의

	char *pc = &c;	// 문자형 포인터 정의 및 초기화
	int *pi = &i;         // 정수형 포인터 정의 및 초기화
	double *pd = &d;     // 실수형 포인터 정의 및 초기화

	(*pc)++;		// 간접 참조로 1 증가
	*pi = *pi + 1;	// 간접 참조로 1 증가
	*pd += 1;		// 간접 참조로 1 증가

	cout << c << endl;
	cout << i << endl;
	cout << d << endl;
		
	return 0;
}
```

## 중간정검

1. 포인터도 변수인가?
2. 변수의 주소를 알아내는 데 사용하는 연산자는?

# 2. 포인터 연산

포인터도 변수이고 메모리의 주소를 값으로 가지고 있으므로 값을 더하거나 뺄 수 있습니다. 포인터에 대해서는 사칙연산중 덧셈과 뺄셈만 의미가 있습니다.

## 덧셈과 뺄셈

```c++
// 포인터의 증감 연산
#include <iostream>
using namespace std;

int main()
{
	char *pc; 
	int *pi;
	double *pd;
	
	pc = (char *)10000;			
	pi = (int *)10000;			
	pd = (double *)10000;			
	cout << "증가 전 pc = " << (void *)pc << "pi = " << pi << "pd = " << pd << endl;
	
	pc++;
	pi++;
	pd++;
	cout << "증가 후 pc = " <<  (void *)pc << "pi = " << pi << "pd = " << pd << endl;
	
	return 0;
}
```
